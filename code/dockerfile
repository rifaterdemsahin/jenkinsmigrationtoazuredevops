# Start from the Jenkins LTS image
FROM jenkins/jenkins:lts

# Switch to root user to install Python and related packages
USER root

# Install Python 3, pip, python3-venv, and build-essential
RUN apt-get update && \
    apt-get install -y python3 python3-pip python3-venv build-essential

# Upgrade pip3 to the latest version
RUN pip3 install --upgrade pip

# Install pytest using pip
RUN pip3 install pytest

# Switch back to the Jenkins user
USER jenkins

# Expose port 8080
EXPOSE 8080
