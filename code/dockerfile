# Start from the Jenkins LTS image
FROM jenkins/jenkins:lts

# Switch to root user to install Python and related packages
USER root

# Install Python 3, pip, python3-venv, and python3-distutils for creating virtual environments
RUN apt-get update && \
    apt-get install -y python3 python3-pip python3-venv python3-distutils

# Upgrade pip using python3 -m pip to avoid potential conflicts
RUN python3 -m pip install --upgrade pip

# Switch back to the Jenkins user
USER jenkins

# Expose port 8080
EXPOSE 8080
