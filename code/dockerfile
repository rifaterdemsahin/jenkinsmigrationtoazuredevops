# Start from the Jenkins LTS image
FROM jenkins/jenkins:lts

# Switch to root user to install Python and related packages
USER root

# Update package lists
RUN apt-get update

# Install Python 3
RUN apt-get install -y python3

# Install pip for Python 3
RUN apt-get install -y python3-pip

# Install python3-venv to create virtual environments
RUN apt-get install -y python3-venv

# Install python3-distutils for Python package management
RUN apt-get install -y python3-distutils

# Install build-essential for compiling Python packages
RUN apt-get install -y build-essential

# Upgrade pip to avoid potential conflicts
RUN python3 -m pip install --upgrade pip

# Install pytest globally for Python testing
RUN pip3 install pytest

# Switch back to the Jenkins user
USER jenkins

# Expose port 8080 for Jenkins
EXPOSE 8080
